(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{MAGf:function(e,t,r){"use strict";r.r(t),r.d(t,"createAudioFilePlayerAdapter",(function(){return v}));var n=r("OvAC"),a=r.n(n),i=r("junw"),o=r("cnbf");function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const c={paused:!0,context:{uri:null,metadata:{}},duration:0,position:0,shuffle:!1,repeat_mode:i.c.OFF,timestamp:0,disallows:{},restrictions:{},track_window:{current_track:null,next_tracks:[],previous_tracks:[]}};var u;!function(e){e[e.UPDATE=0]="UPDATE"}(u||(u={}));const p=Object(o.e)((e=c,t)=>{switch(t.type){case u.UPDATE:return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{},t.newPartialState);default:return e}}),d=e=>{p.dispatch({type:u.UPDATE,newPartialState:e})};var l=r("qG8n"),m=r.n(l),y=r("wJTk"),b=r.n(y);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const O=(e,t)=>{var r;e.addEventListener("playing",()=>{d({paused:!1})}),e.addEventListener("pause",()=>{d({paused:!0})}),e.addEventListener("timeupdate",e=>{t.emit(i.a.PROGRESS,{position:1e3*e.target.currentTime})}),e.addEventListener("canplay",()=>{t.emit(i.a.BUFFERING_END,void 0)}),e.addEventListener("waiting",()=>{t.emit(i.a.BUFFERING_START,void 0)}),e.addEventListener("error",e=>{var r;const n=null===(r=null==e?void 0:e.target)||void 0===r?void 0:r.error;let a;if(null==n?void 0:n.code){switch(n.code){case 1:a="Problem fetching the track";break;case 2:a="Network error";break;case 3:a="Error decoding the track";break;case 4:a="Unable to play the track";break;default:a="Unknown audio playback error"}t.emit(i.a.ERROR,{error:w({},n,{code:null==n?void 0:n.code,message:a})})}}),r=e=>{t.emit(i.a.STATE_CHANGED,e)},p.subscribe(()=>r(p.getState()))},v=e=>{const t=new m.a;return setTimeout(()=>{try{if(!e)throw new Error("Audio element not found");O(e,t)}catch(e){throw t.emit(i.a.PLAYER_INITIALIZATION_FAILED,{error:e}),e}},0),{async play(t,{metadata:r,offset:n}){const a=r;if(!a)return Promise.reject("No audio file URL. :(");const i=({name:e,uri:t})=>({name:e,uri:t}),o=a.id||b.a.from(a.uri)._base62Id;return d({track_window:{current_track:{id:o,uri:a.uri,type:a.type,name:a.name||"",media_type:"audio",duration_ms:a.duration_ms,album:a.album&&(({uri:e,name:t,images:r,artists:n})=>({uri:e,name:t,images:r,artists:n&&n.map(i)||[],linked_from:{id:null,uri:null}}))(a.album),artists:a.artists&&a.artists.map(i)},next_tracks:[],previous_tracks:[]},paused:!1,disallows:{skipping_next:!0,skipping_prev:!0},restrictions:{disallow_skipping_next_reasons:["unauthenticated_user"],disallow_skipping_prev_reasons:["unauthenticated_user"]},context:a.context}),e.src=a.url||"",n&&n>=0&&n<e.duration&&(e.currentTime=n),e.play(),!0},async resume(){try{return e.play(),!0}catch(e){return!1}},async pause(){try{return e.pause(),!0}catch(e){return!1}},async togglePlay(){return e.paused?this.resume():this.pause()},seek:async t=>(e.currentTime=t/1e3,Promise.resolve(!0)),seekForward:async t=>(e.currentTime+=t/1e3,Promise.resolve(!0)),seekBackward:async t=>(e.currentTime-=t/1e3,Promise.resolve(!0)),on(e,r,n){t.on(e,r,n)},removeListener(e,r){t.removeListener(e,r)}}}}}]);